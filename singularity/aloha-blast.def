Bootstrap: docker
From: ubuntu:latest

%setup
    mkdir "$SINGULARITY_ROOTFS/muscope-blast"
    mount --no-mtab --bind `pwd` "$SINGULARITY_ROOTFS/muscope-blast"

%post

   apt update
   apt install -y apt-utils git wget zip zlib1g-dev libbz2-dev build-essential autoconf automake libtool
   apt install -y python3-dev python3-pip
   #apt install -y openjdk-9-jre-headless package is broke
   apt install -y openjdk-8-jre-headless

   /usr/bin/pip3 install --upgrade pip
   /usr/bin/pip3 install biopython numpy

   mkdir /scripts
   cp /muscope-blast/scripts/*.py /scripts/

   # create mount points for TACC directories
   mkdir /home1
   mkdir /scratch
   mkdir /work

%test
   echo "PATH=${PATH}"

   python3 --version
   ls -l /scripts
